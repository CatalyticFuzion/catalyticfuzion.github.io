File          ::= MetaTags Feature? Background? (MethodScenario)* (Examples)?

MetaTags      ::= (ClassTag | DependencyTag | MethodTag | InputTag | OutputTag | DatamodelTag | FieldsTag)*

ClassTag      ::= '@class:' Identifier
DependencyTag ::= '@dependencies:' DependencyList
MethodTag     ::= '@method:' Identifier
InputTag      ::= '@input:' ParameterList
OutputTag     ::= '@output:' ParameterList
DatamodelTag  ::= '@datamodel:' Identifier
FieldsTag     ::= '@fields:' FieldList

DependencyList ::= Dependency (Dependency)*
Dependency     ::= Identifier '{' DependencyMethod* '}'
DependencyMethod ::= Identifier '{' InputTag? OutputTag? '}'

ParameterList  ::= (Parameter (',' Parameter)*)?
Parameter      ::= Identifier ':' Type

FieldList      ::= '-' Identifier ':' Type (Newline '- Identifier ':' Type)*

Feature       ::= 'Feature:' Text

Background    ::= 'Background:' (Given | When | Then | And | But)+

MethodScenario ::= MethodBlock Scenario

MethodBlock   ::= MethodTag InputTag? OutputTag?

Scenario      ::= 'Scenario:' Text (Given | When | Then | And | But)+
ScenarioOutline ::= 'Scenario Outline:' Text (Given | When | Then | And | But)+ Examples

Examples      ::= 'Examples:' Table

Given         ::= 'Given' StructuredReference Text?
When          ::= 'When' StructuredReference Text?
Then          ::= 'Then' StructuredReference Text?
And           ::= 'And' StructuredReference Text?
But           ::= 'But' StructuredReference Text?

StructuredReference ::= '[$' Identifier ('.' Identifier)? ']'

Table         ::= '|' (Identifier ('|' Identifier)*) '|'
                  (Newline '|' Value ('|' Value)* '|')+

Identifier    ::= [a-zA-Z_][a-zA-Z0-9_]*

Type          ::= 'text' | 'int' | 'bool' | 'float' | Identifier

Value         ::= Any literal value (string, number, boolean)
Text          ::= Any sequence of characters